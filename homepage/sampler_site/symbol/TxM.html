<!doctype html>
<html lang="ko"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Symbol Wiki: TxM</title>
<link rel="stylesheet" href="../assets/style.css"/>
<script>
window.MathJax={
  tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']]},
  options:{skipHtmlTags:['script','noscript','style','textarea','pre','code']}
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head><body><div class="wrap"><article class="paper"><div class="topnav"><a class="btn" href="index.html">기호 위키 인덱스</a><a class="btn" href="../index.html#notation">최상위 문서(기호 탭)</a></div><h1>Symbol: $T_x\mathcal{M}$</h1><p class='muted'><strong>접공간 (Tangent space)</strong></p><h2>모티베이션 (Motivation)</h2><p>$T_x\mathcal{M}$은 다양체 $\mathcal{M}$ 위의 한 점 $x$에서 ‘순간적으로 움직일 수 있는 방향들’을 모아 둔 선형공간이다. 제약을 깨지 않는 업데이트 방향을 말할 때 등장한다.</p><ol class='list'><li>다양체 제약 $x\in\mathcal{M}$이 있을 때, ‘다음으로 가는 방향’은 아무 벡터나 될 수 없다. 허용되는 1차 방향은 접공간 $T_x\mathcal{M}$에 들어가며, 이것이 제약을 보존하는 업데이트/벡터장을 정의하는 기본 무대다.</li><li>샘플러는 본질적으로 $x$에 어떤 보정 벡터를 더하는 수치적분이다. 제약 하에서는 보정 벡터를 먼저 $T_x\mathcal{M}$로 투영한 뒤, retraction으로 올려 보내는 방식이 표준이며(리만 최적화, constrained ODE), 이때 $T_x\mathcal{M}$이 없으면 ‘올바른 방향’이라는 말 자체가 모호해진다.</li><li>ComfyUI에서 어떤 값/특징을 ‘정규화해서 쓰자’ 같은 커스터마이징을 하면, 업데이트 후 매번 정규화하는 식으로 구현하기 쉽다. 하지만 업데이트 방향에 접공간이 아닌 성분이 많이 섞여 있으면 불필요한 왜곡이 생길 수 있다. 접공간 투영을 명시하면 왜곡을 줄이는 방향으로 설계를 바꿀 수 있다.</li><li>확률적 샘플링(SDE)에서도 노이즈 벡터를 접공간에 제한하면 상태가 제약을 덜 깨뜨린다(예: 구면 위의 등방 잡음은 접공간에서 정의). 즉 $T_x\mathcal{M}$은 결정론/확률론 모두에서 ‘허용되는 미소 변동’의 공간이다.</li><li>결국 $T_x\mathcal{M}$을 도입하는 목적은, 비선형 제약(곡면) 위 문제를 ‘선형 공간에서의 계산’으로 바꾸는 것이다. 그래서 수치 구현(벡터 연산)과 기하학적 제약을 연결하는 다리 역할을 한다.</li></ol><h2>엄밀 정의 (Formal Definitions)</h2><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ T_x\mathcal{M}=\{\gamma'(0):\gamma:(-\varepsilon,\varepsilon)\to\mathcal{M},\ \gamma(0)=x\} $$</div></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ \mathcal{M}=S^{d-1}\Rightarrow T_x\mathcal{M}=\{v\in\mathbb{R}^d:x^\top v=0\} $$</div></div><h2>정의 해설 (Commentary)</h2><h3>해설(요약) (Summary)</h3><p>첫 문장은 접공간의 ‘정의’다. 곡면 위에서 움직이는 모든 가능한 곡선 $\gamma$를 생각하고, 그 곡선의 순간 속도 $\gamma'(0)$를 모아 만든 선형공간이 접공간이다.</p><p>두 번째 문장은 구면의 특수한 경우로, 조건 $x^\top v=0$이 접공간을 아주 간단히 표현해 준다. 즉, 구면에서 움직일 수 있는 방향은 반지름 방향($x$ 방향)과 직교해야 한다.</p><p>구현에서는 임의의 벡터 $u$를 접공간으로 ‘투영’하는 연산 $u\mapsto u-(x^\top u)x$를 자주 쓴다. 이 연산은 $x^\top(u-(x^\top u)x)=0$을 보장하기 때문이다.</p><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ T_x\mathcal{M}=\{\gamma'(0):\gamma:(-\varepsilon,\varepsilon)\to\mathcal{M},\ \gamma(0)=x\} $$</div><h3>해설</h3><ol class='list'><li>곡선 $\gamma$는 다양체 위를 따라 움직이는 ‘경로’다. $\gamma(0)=x$는 그 경로가 $t=0$에서 점 $x$를 지난다는 뜻이다.</li><li>$\gamma'(0)$는 그 순간의 속도 벡터다. 가능한 모든 경로의 가능한 모든 순간 속도를 모으면, 그게 접공간이 된다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>곡면 위에서 아주 짧게 움직이는 건 거의 직선 운동이다. 그 ‘직선 근사’가 접공간이다.</li></ol><h3>수치 예시</h3><ol class='list'><li>$\mathcal{M}=S^1$, $x=(0.6,0.8)$라 하고 $\gamma(t)=(\cos(\alpha t)\cdot0.6-\sin(\alpha t)\cdot0.8,\ \sin(\alpha t)\cdot0.6+\cos(\alpha t)\cdot0.8)$처럼 원 위를 회전시키면 $\gamma(0)=x$이고 $\gamma'(0)=\alpha(-0.8,0.6)$가 접벡터가 된다.</li></ol></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ \mathcal{M}=S^{d-1}\Rightarrow T_x\mathcal{M}=\{v\in\mathbb{R}^d:x^\top v=0\} $$</div><h3>해설</h3><ol class='list'><li>구면은 제약식 $\|x\|_2^2=1$로 정의된다. 이를 미분하면 $2x^\top v=0$이 되어 접벡터 조건 $x^\top v=0$이 나온다.</li><li>따라서 접공간은 ‘반지름 방향과 직교한 모든 방향’의 집합이다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>구면 위에서 앞으로 움직이면, 순간적으로는 반지름 방향이 아니라 ‘옆으로’ 움직인다.</li></ol><h3>수치 예시</h3><ol class='list'><li>$x=(0.6,0.8)$에서 $v=(0.8,-0.6)$는 $x^\top v=0$이므로 접벡터다.</li><li>$u=(1,0)$를 접공간으로 투영하면 $u-(x^\top u)x=(1,0)-0.6(0.6,0.8)=(0.64,-0.48)$이고 실제로 $x^\top(0.64,-0.48)=0$이다.</li></ol></div><h2>직관(요약) (Intuition)</h2><ol class='list'><li>곡면을 확대해 보면 ‘접평면’처럼 보이는데, 그 접평면이 바로 접공간이다.</li><li>접공간에서 계산한 작은 이동 $v$를 다시 $\mathcal{M}$으로 올려 보내는 것이 retraction/정규화 같은 단계다.</li><li>코드 구현에선 “업데이트 방향을 제약에 맞게 다듬는다”는 말이 곧 $u\mapsto \Pi_{T_x\mathcal{M}}(u)$를 뜻한다. 즉 임의 벡터(예: 모델이 준 방향)를 접공간으로 투영한 뒤에만 이동시키면 제약 위반/왜곡이 줄어든다.</li><li>ComfyUI에서 정규화 보정(<code>normalize</code>)을 step마다 넣는 경우, 접공간 투영을 같이 넣으면 ‘정규화로 인해 생기는 접선 방향의 왜곡’을 줄이는 설계가 가능하다(리만 최적화의 표준 패턴).</li></ol><h2>구체 원소 예시(모음) (Concrete Examples)</h2><ol class='list'><li>$\mathcal{M}=S^1\subset\mathbb{R}^2$, $x=(0.6,0.8)$라 하자. $v=(0.8,-0.6)$는 $x^\top v=0.6\cdot0.8+0.8\cdot(-0.6)=0$이므로 $v\in T_x\mathcal{M}$이다.</li><li>같은 점에서 $v'=(1,0)$는 $x^\top v'=0.6\ne0$이므로 접공간 벡터가 아니다(구면/원 제약을 즉시 깨는 방향).</li><li>(다른 접벡터 예) 같은 $x=(0.6,0.8)$에서 $v''=(4,-3)$도 $0.6\cdot4+0.8\cdot(-3)=2.4-2.4=0$이므로 $v''\in T_x\mathcal{M}$이다.</li><li>(포물선 접선 예) $\mathcal{M}=\{(u,u^2)\}$에서 $u=2$인 점 $(2,4)$에서의 접선 방향은 $\frac{d}{du}(u,u^2)\big|_{u=2}=(1,4)$로 볼 수 있다(기울기 4).</li></ol><h2>코드 대응 (Code Mapping)</h2><ol class='list'><li>보정 벡터를 <code>v = v - (x^T v)x</code>처럼 직교화하면 접공간 투영과 같다.</li></ol><h2>자주 헷갈리는 점 (Pitfalls)</h2><ol class='list'><li>접공간을 무시하면 제약 위상에서 장기 drift가 생긴다.</li></ol><h2>관련 기호 (Related Symbols)</h2><div class='topnav'><a class="btn" href="M_manifold.html">$\mathcal{M}$</a><a class="btn" href="R_x.html">$R_x$</a></div><div class="topnav"><a class="btn" href="M_manifold.html">이전: $\mathcal{M}$</a><a class="btn" href="S_map.html">다음: $S$</a></div></article></div></body></html>