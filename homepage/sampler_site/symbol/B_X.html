<!doctype html>
<html lang="ko"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Symbol Wiki: B_X</title>
<link rel="stylesheet" href="../assets/style.css"/>
<script>
window.MathJax={
  tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']]},
  options:{skipHtmlTags:['script','noscript','style','textarea','pre','code']}
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head><body><div class="wrap"><article class="paper"><div class="topnav"><a class="btn" href="index.html">기호 위키 인덱스</a><a class="btn" href="../index.html#notation">최상위 문서(기호 탭)</a></div><h1>Symbol: $\mathcal{B}(\mathcal{X})$</h1><p class='muted'><strong>보렐 σ-대수 (Borel sigma-algebra)</strong></p><h2>모티베이션 (Motivation)</h2><p>상태공간 $\mathcal{X}$에서 ‘확률을 붙일 수 있는 집합들’을 모아 둔 표준 $\sigma$-대수(보렐 $\sigma$-대수)다. 확률변수/분포를 엄밀히 쓰려면 배경으로 거의 항상 깔린다.</p><ol class='list'><li>ComfyUI에서 같은 프롬프트/모델이라도 <code>seed</code>, <code>sampler_name</code>, <code>scheduler</code>, (sampler에 따라) <code>eta/s_noise/s_churn</code> 같은 선택에 따라 결과가 달라진다. 이는 출력이 ‘랜덤’이라는 뜻이고, 수학적으로는 각 결과가 어떤 확률변수 $x_k$의 실현값이라는 뜻이다. 확률변수의 문법을 제대로 쓰려면 값공간 $\mathcal{X}$ 위의 사건들을 모아 둔 $\sigma$-대수 $\mathcal{B}(\mathcal{X})$가 필요하다.</li><li>‘특정 현상이 발생할 확률’(예: latent 성분이 범위 밖으로 튀는 사건, 마스크 고정이 깨지는 사건, 특정 영역이 과노출되는 사건)을 말하려면, 그 현상이 $\mathcal{X}$의 부분집합 $A\subset\mathcal{X}$로 먼저 정의돼야 한다. $\mathcal{B}(\mathcal{X})$는 이런 사건들을 놓을 “표준 사건 공간”을 제공한다.</li><li>유한차원 $\mathcal{X}=\mathbb{R}^d$에서는 우리가 직관적으로 정의하는 거의 모든 집합(구간, 원판, 다각형, 반공간 등)이 Borel 집합이다. 그래서 실제 생성/편집 논의에서 “사건이 너무 기괴해서 확률을 못 붙인다” 같은 기술적 문제를 대부분 피할 수 있다.</li><li>샘플러를 SDE로 보고 밀도 $\rho_t$의 진화를 다루면(FPE 관점), $\rho_t$는 $\mathcal{B}(\mathcal{X})$ 위의 측도(또는 그에 대한 밀도)로 해석된다. 즉 ‘분포가 시간에 따라 변한다’는 문장을 엄밀하게 쓰기 위한 최소 배경이 $\mathcal{B}(\mathcal{X})$다.</li><li>커스텀 샘플러를 만들 때는 조건 분기/클리핑/리젝션 같은 규칙을 넣는 경우가 많다(예: $\|x\|_2&gt;R$이면 보정). 이런 규칙이 확률 과정으로서 잘 정의되려면, 역상 $x_k^{-1}(A)$가 사건이 되는 가측성 조건이 깔려 있어야 하고, 그때 표준 선택이 $\mathcal{B}(\mathcal{X})$다.</li></ol><h2>엄밀 정의 (Formal Definitions)</h2><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ \mathcal{B}(\mathcal{X})=\sigma(\{U\subset\mathcal{X}:U\ \text{open}\}) $$</div></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ x_k\ \text{measurable}\iff \forall A\in\mathcal{B}(\mathcal{X}),\ x_k^{-1}(A)\in\mathcal{F} $$</div></div><h2>정의 해설 (Commentary)</h2><h3>해설(요약) (Summary)</h3><p>첫 문장은 $\mathcal{B}(\mathcal{X})$가 “열린집합들을 포함하는 가장 작은 $\sigma$-대수”라는 뜻이다. 왜 하필 열린집합인가? 거리/위상 구조가 있을 때 열린집합이 가장 기본적인 ‘관측 가능한’ 집합이기 때문이다(볼, 근방 등).</p><p>둘째 문장은 확률변수의 문법이다. $x_k$가 가측이라는 말은, 상태공간에서 사건 $A\in\mathcal{B}(\mathcal{X})$를 하나 잡으면 “$x_k$가 $A$ 안에 들어간다”라는 사건이 표본공간에서 $\mathcal{F}$-사건으로 표현된다는 뜻이다.</p><p>코드 레벨에서는 $\sigma$-대수를 직접 다루지 않는다. 대신 “$x_k$는 난수로부터 계산되는 어떤 함수”라는 상식이 가측성 가정을 사실상 대신한다.</p><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ \mathcal{B}(\mathcal{X})=\sigma(\{U\subset\mathcal{X}:U\ \text{open}\}) $$</div><h3>해설</h3><ol class='list'><li>$\sigma(\cdot)$는 “주어진 집합족을 포함하는 가장 작은 $\sigma$-대수”를 뜻한다. 따라서 $\mathcal{B}(\mathcal{X})$는 열린집합들로부터 출발해, 여집합/가산합집합을 반복해서 만들어지는 모든 집합들의 모음이다.</li><li>이렇게 정의하면 거리/위상으로 자연스럽게 표현되는 사건들(예: ‘$\|x\|&lt;1$’)이 자동으로 사건집합에 포함된다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>‘구간/원판/사각형 같은 평범한 집합들’을 확률 사건으로 허용하기 위한 최소한의 틀이라고 보면 된다.</li></ol><h3>수치 예시</h3><ol class='list'><li>$\mathcal{X}=\mathbb{R}$에서 열린집합은 (예: $(-1,2)$) 같은 구간들의 합집합으로 표현된다. 따라서 $(-1,2)\in\mathcal{B}(\mathbb{R})$.</li><li>$A_n=(-1/n,1/n)$이면 $\bigcap_{n\ge1}A_n=\{0\}$이고, $\{0\}$도 Borel 집합이다(가산 연산에 닫혀 있으므로).</li></ol></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ x_k\ \text{measurable}\iff \forall A\in\mathcal{B}(\mathcal{X}),\ x_k^{-1}(A)\in\mathcal{F} $$</div><h3>해설</h3><ol class='list'><li>가측성의 정의는 ‘역상(preimage)이 사건이 된다’는 한 문장으로 요약된다.</li><li>여기서 $x_k^{-1}(A)=\{\omega\in\Omega: x_k(\omega)\in A\}$는 “난수 시나리오 중에서 상태가 사건 $A$에 들어가는 경우”를 모아 둔 집합이다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>상태공간에서 “$x$가 이 집합 안에 있나?”를 물으면, 표본공간에서도 “그 질문이 참인 $\omega$는 어떤 것들인가?”를 물을 수 있어야 한다. 그게 가측성이다.</li></ol><h3>수치 예시</h3><ol class='list'><li>유한 표본공간 예: $\Omega=\{1,2,3\}$, $\mathcal{F}=2^\Omega$. $x_k(1)=0.1$, $x_k(2)=0.7$, $x_k(3)=-0.2$ (값공간 $\mathcal{X}=\mathbb{R}$). 사건 $A=(0,1)$이면 $x_k^{-1}(A)=\{1,2\}\in\mathcal{F}$라서 가측성 조건을 만족한다.</li></ol></div><h2>직관(요약) (Intuition)</h2><ol class='list'><li>쉽게 말해 ‘$\mathcal{X}$에서 우리가 보통 생각하는 자연스러운 집합들(구간, 원판, 직사각형 등)’은 거의 다 Borel 집합이라서, 실무에서는 큰 스트레스 없이 쓴다.</li><li>$\sigma$-대수는 ‘여집합/가산합집합을 해도 닫혀 있는 집합족’이라서 확률의 연산 규칙과 잘 맞는다.</li><li>ComfyUI 관점에서는 “어떤 조건을 만족하는 latent들의 모음”을 사건(event) $A\subset\mathcal{X}$로 생각하면 된다. 예를 들어 ‘$\|x\|_2\le 10$’ 같은 조건은 전형적으로 $A\in\mathcal{B}(\mathcal{X})$에 속하고, 샘플러가 그 사건을 얼마나 자주 방문하는지(=확률)를 말할 수 있다.</li></ol><h2>구체 원소 예시(모음) (Concrete Examples)</h2><ol class='list'><li>$\mathcal{X}=\mathbb{R}$이면 구간 $(-1,2)$, $[0,1]$ 같은 집합은 모두 $\mathcal{B}(\mathbb{R})$에 속한다.</li><li>$\mathcal{X}=\mathbb{R}^2$이면 원판 $A=\{x\in\mathbb{R}^2:\|x\|_2\le 1\}$도 Borel 집합이다. 예를 들어 $(0.6,0.8)\in A$이고 $(2,0)\notin A$.</li><li>(ComfyUI/코드 예) $\mathcal{X}=\mathbb{R}^2$, 사건 $A=\{x:\|x\|_2\le 1\}$라 하자. 어떤 step에서 $x=(1.4,-0.5)$면 $\|x\|_2\approx1.49$로 $x\notin A$다. 반면 정규화(예: $x':=x/\|x\|_2\approx(0.94,-0.34)$)를 적용하면 $x'\in A$가 된다. 이런 “사건을 만족하도록 보정한다”는 논의는 결국 $A\in\mathcal{B}(\mathcal{X})$ 위에서 진행된다.</li></ol><h2>코드 대응 (Code Mapping)</h2><ol class='list'><li>코드에서 직접 쓰진 않지만, <code>x</code>의 확률분포/기대값/밀도를 다룰 때 배경 가정으로 항상 필요하다.</li></ol><h2>자주 헷갈리는 점 (Pitfalls)</h2><ol class='list'><li>표본공간의 $\sigma$-대수와 상태공간의 Borel $\sigma$-대수를 혼동하면 사상 방향이 뒤집힌다.</li></ol><h2>관련 기호 (Related Symbols)</h2><div class='topnav'><a class="btn" href="X.html">$\mathcal{X}$</a><a class="btn" href="Omega_F_P.html">$(\Omega,\mathcal{F},\mathbb{P})$</a><a class="btn" href="Phi_k.html">$\Phi_k$</a></div><div class="topnav"><a class="btn" href="X.html">이전: $\mathcal{X}$</a><a class="btn" href="Sigma.html">다음: $\Sigma$</a></div></article></div></body></html>