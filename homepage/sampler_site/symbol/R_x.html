<!doctype html>
<html lang="ko"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Symbol Wiki: R_x</title>
<link rel="stylesheet" href="../assets/style.css"/>
<script>
window.MathJax={
  tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']]},
  options:{skipHtmlTags:['script','noscript','style','textarea','pre','code']}
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head><body><div class="wrap"><article class="paper"><div class="topnav"><a class="btn" href="index.html">기호 위키 인덱스</a><a class="btn" href="../index.html#notation">최상위 문서(기호 탭)</a></div><h1>Symbol: $R_x$</h1><p class='muted'><strong>리트랙션 (Retraction)</strong></p><h2>모티베이션 (Motivation)</h2><p>접공간에서 계산한 작은 이동 $v\in T_x\mathcal{M}$을 실제 다양체 $\mathcal{M}$ 위의 점으로 되돌리는 지도를 retraction $R_x$라고 한다. 실무에서는 ‘더한 뒤 정규화’ 같은 간단한 형태로 구현되는 경우가 많다.</p><ol class='list'><li>다양체 제약($x\in\mathcal{M}$)이 있는 상황에서 샘플러/보정은 보통 “접공간에서 벡터 연산으로 방향을 계산”하고 “그 결과를 다시 제약 위로 복귀”하는 두 단계로 구성된다. 이때 두 번째 단계를 담당하는 표준 도구가 retraction $R_x$다.</li><li>ComfyUI 커스터마이징에서도 ‘정규화’ 류 후처리를 step마다 넣는 경우가 생긴다(예: 어떤 특징/임베딩/상태를 단위노름으로 유지). 이런 구현은 수학적으로 $R_x(v)=\frac{x+v}{\|x+v\|}$ 같은 retraction으로 해석되며, “왜 제약이 유지되는가”를 설명해 준다.</li><li>retraction을 명시하면 누적 오차(장기 drift)를 다루기 쉬워진다. 단순히 $x+v$만 반복하면 작은 제약 위반이 step마다 쌓여 점점 제약에서 멀어질 수 있는데, $R_x$를 넣으면 매 step에서 제약 만족을 강제할 수 있다.</li><li>이론적으로는 exponential map(지오데식)이 ‘정확한’ 이동이지만, 계산이 비싸거나 닫힌형이 없는 경우가 많다. retraction은 $R_x(0)=x$, $dR_x(0)=\mathrm{Id}$ 같은 최소 조건만 만족하면서 계산이 싼 근사로, 실무 수치해석에서 널리 쓰인다.</li><li>확률적 업데이트(SDE)에서는 노이즈를 더한 뒤에도 제약을 유지해야 할 수 있다. 이때도 “노이즈를 접공간에서 주입하고(restrict), 결과를 $R_x$로 복귀”하는 패턴이 자연스럽고, 다양체 위의 확산을 구현하는 기본 골격이 된다.</li></ol><h2>엄밀 정의 (Formal Definitions)</h2><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ R_x:T_x\mathcal{M}\to\mathcal{M},\quad R_x(0)=x,\quad dR_x(0)=\mathrm{Id} $$</div></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ \mathcal{M}=S^{d-1}:\quad R_x(v)=\frac{x+v}{\|x+v\|_2} $$</div></div><h2>정의 해설 (Commentary)</h2><h3>해설(요약) (Summary)</h3><p>첫 부분 $R_x:T_x\mathcal{M}\to\mathcal{M}$는 “접공간 벡터를 다양체의 점으로 보낸다”는 타입 선언이다. 입력은 ‘방향/보정’이고 출력은 ‘제약을 만족하는 새 점’이다.</p><p>$R_x(0)=x$는 “아무 것도 안 움직이면 그대로다”라는 최소한의 일관성 조건이다.</p><p>$dR_x(0)=\mathrm{Id}$는 “아주 작은 이동에서는 $R_x$가 거의 $x+v$처럼 행동한다”는 뜻이다. 그래서 1차(선형) 수준에서는 접공간 계산이 올바르게 반영된다.</p><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ R_x:T_x\mathcal{M}\to\mathcal{M},\quad R_x(0)=x,\quad dR_x(0)=\mathrm{Id} $$</div><h3>해설</h3><ol class='list'><li>retraction은 ‘접공간에서의 벡터 연산’과 ‘제약 위의 점’ 사이를 이어 주는 다리다.</li><li>$dR_x(0)=\mathrm{Id}$는 $v$가 작을 때 $R_x(v)$가 $x+v$의 1차 근사와 일치하도록 해 준다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>작은 스텝에서는 “그냥 더했다가 제약으로 복귀”와 거의 같다.</li></ol><h3>수치 예시</h3><ol class='list'><li>$v=0$이면 항상 $R_x(0)=x$.</li></ol></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ \mathcal{M}=S^{d-1}:\quad R_x(v)=\frac{x+v}{\|x+v\|_2} $$</div><h3>해설</h3><ol class='list'><li>구면 제약에서 가장 흔한 retraction은 정규화다. 어떤 벡터든 길이를 1로 맞추면 구면 위에 올라간다.</li><li>$v$가 충분히 작다면, 정규화는 $x+v$와 매우 비슷하게 움직이면서도 제약을 지킨다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>“더한 다음 길이를 1로 맞춘다”는 구현이 수학적으로는 retraction으로 해석된다.</li></ol><h3>수치 예시</h3><ol class='list'><li>$x=(0.6,0.8)$, $v=(0.1,-0.2)$면 $R_x(v)\approx(0.759,0.651)$ (위 계산).</li></ol></div><h2>직관(요약) (Intuition)</h2><ol class='list'><li>접평면에서 한 걸음 뗀 뒤, 다시 곡면 위로 ‘붙여 넣는’ 동작이다.</li><li>구면/원 제약에서는 “벡터를 더한 뒤 길이를 1로 맞춘다”가 가장 직관적인 retraction이다.</li><li>코드 구현에서 $R_x$는 보통 “더한 뒤 normalize” 같은 한두 줄로 구현된다. 하지만 수학적으로는 $R_x(0)=x$, $dR_x(0)=\mathrm{Id}$ 같은 조건 덕분에 작은 업데이트에서 1차 정확도를 보장하는 ‘올바른’ 제약 복귀 연산으로 분류된다.</li></ol><h2>구체 원소 예시(모음) (Concrete Examples)</h2><ol class='list'><li>$\mathcal{M}=S^1\subset\mathbb{R}^2$, $x=(0.6,0.8)$라 하자. $v=(0.1,-0.2)$면 $x+v=(0.7,0.6)$이고 $\|x+v\|_2\approx0.922$이므로 $R_x(v)=\frac{(0.7,0.6)}{0.922}\approx(0.759,0.651)$.</li><li>더 작은 $v=(0.01,-0.02)$면 $x+v=(0.61,0.78)$, 정규화 후도 $(0.616,0.788)$처럼 크게 달라지지 않는다(‘작은 이동’ 가정).</li><li>(구면 수치 예) $\mathcal{M}=S^2\subset\mathbb{R}^3$, $x=(1,0,0)$, $v=(0,0.2,0.1)$이면 $x+v=(1,0.2,0.1)$, 노름은 $\sqrt{1+0.04+0.01}\approx1.025$이므로 $R_x(v)\approx(0.975,0.195,0.098)$이다.</li></ol><h2>코드 대응 (Code Mapping)</h2><ol class='list'><li><code>x = normalize(x + v)</code> 패턴이 가장 흔한 retraction 근사다.</li></ol><h2>자주 헷갈리는 점 (Pitfalls)</h2><ol class='list'><li>지오데식 exponential map과 retraction을 동일시하면 고차 오차 해석이 틀릴 수 있다.</li></ol><h2>관련 기호 (Related Symbols)</h2><div class='topnav'><a class="btn" href="M_manifold.html">$\mathcal{M}$</a><a class="btn" href="TxM.html">$T_x\mathcal{M}$</a></div><div class="topnav"><a class="btn" href="Pi_K.html">이전: $\Pi_{\mathcal{K}}$</a><a class="btn" href="Omega_F_P.html">다음: $(\Omega,\mathcal{F},\mathbb{P})$</a></div></article></div></body></html>