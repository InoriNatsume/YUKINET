<!doctype html>
<html lang="ko"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Symbol Wiki: Rho_t</title>
<link rel="stylesheet" href="../assets/style.css"/>
<script>
window.MathJax={
  tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']]},
  options:{skipHtmlTags:['script','noscript','style','textarea','pre','code']}
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head><body><div class="wrap"><article class="paper"><div class="topnav"><a class="btn" href="index.html">기호 위키 인덱스</a><a class="btn" href="../index.html#notation">최상위 문서(기호 탭)</a></div><h1>Symbol: $\rho_t$</h1><p class='muted'><strong>시간별 분포 (Time-dependent distribution)</strong></p><h2>모티베이션 (Motivation)</h2><p>$\rho_t$는 시간 $t$에서의 상태 $x_t$가 ‘어떤 값들을 얼마나 자주 가지는지’를 나타내는 확률분포(확률측도)다. 개별 샘플 하나가 아니라 샘플 집단 전체를 보는 관점에서 등장한다.</p><ol class='list'><li>ComfyUI 사용자는 보통 한 번에 한 장의 결과를 보지만, ‘품질’이나 ‘다양성’은 사실상 여러 seed에 걸친 결과의 분포적 성질이다. 예를 들어 어떤 sampler가 아티팩트를 자주 내는지, 특정 스타일이 얼마나 안정적으로 나오는지는 결국 최종 분포 $\rho_{t_{\mathrm{end}}}$의 성질로 표현하는 게 더 정확하다.</li><li>scheduler/sampler/CFG 선택은 초기 가우시안 분포에서 데이터 분포로 가는 ‘분포 경로’ 자체를 바꾼다. $\rho_t$를 도입하면 “이 선택은 분포를 어떻게 이동시키는가”를 한 언어로 말할 수 있고, 특히 스케줄 설계(어느 구간에 오차를 배분하는가)와 연결된다.</li><li>편집(inpaint/img2img)에서는 사실상 조건부 분포 $\rho_t(\cdot\mid c)$를 샘플링한다. 마스크/참조/프롬프트가 바뀌면 조건이 바뀌고, 그에 따라 분포가 바뀐다. 이를 ‘조건이 바뀐 같은 샘플링 문제’로 묶어 주는 관점이 $\rho_t$다.</li><li>영상 생성에서는 프레임별 독립 분포가 아니라 ‘프레임들의 결합분포’(상관 구조)가 중요해진다. 깜빡임은 프레임 간 상관이 약한 분포에서 쉽게 나타나며, 이를 해결하는 방법(공통 노이즈, 조건 공유 등)은 결국 $\rho_t$의 결합 구조를 설계하는 문제로 볼 수 있다.</li><li>이론적으로는 FPE가 $\rho_t$의 시간 진화를 PDE로 기술하고, OT는 $\rho_0\to\rho_1$ 수송을 최소 작용으로 기술한다. 커스텀 sampler를 ‘경로 수준’이 아니라 ‘분포 수준’에서 이해하고 싶다면 $\rho_t$가 출발점이다.</li></ol><h2>엄밀 정의 (Formal Definitions)</h2><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ \rho_t\in\mathcal{P}_2(\mathcal{X}) $$</div></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ \partial_t\rho_t=-\nabla\cdot(\rho_t b_\theta)+\frac12\nabla\cdot((gg^\top)\nabla\rho_t) $$</div></div><h2>정의 해설 (Commentary)</h2><h3>해설(요약) (Summary)</h3><p>첫 문장에서 $\mathcal{P}_2(\mathcal{X})$는 “2차 모멘트 $\int\|x\|^2\,d\rho(x)$가 유한한 확률분포들의 집합”이다. OT에서 $W_2$ 거리(2-와서슈타인)를 쓰려면 이 조건이 자연스럽게 등장한다.</p><p>둘째 문장은 SDE가 유도하는 분포의 시간 진화를 나타내는 PDE(FPE)다. drift는 질량을 ‘운반’하고($-\nabla\cdot(\rho b)$), diffusion은 질량을 ‘퍼뜨린다’(라플라시안 항).</p><p>샘플러를 분포 수준에서 이해하면, 개별 경로의 미세한 오차보다 “분포가 어디로 흘러가나”가 핵심이 된다(weak 관점).</p><div class='box'><p class='small'><strong>정의 1.</strong></p><div class='formula'>$$ \rho_t\in\mathcal{P}_2(\mathcal{X}) $$</div><h3>해설</h3><ol class='list'><li>$\rho_t$는 시간 $t$에서의 확률분포다. 확률분포는 “집합 $A$가 일어날 확률”을 주는 객체(측도)로 생각할 수 있다.</li><li>$\mathcal{P}_2$ 조건은 OT(특히 $W_2$)를 쓰기 위한 기술적 조건으로, 분산이 무한대인 분포는 제외한다는 의미다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>샘플 하나하나는 랜덤하지만, 많이 모으면 ‘분포의 모양’이 보인다. 그 모양이 $\rho_t$다.</li></ol><h3>수치 예시</h3><ol class='list'><li>$\mathbb{R}$에서 $\rho_t=\mathcal{N}(0,1)$이면 $\int x^2\,d\rho_t(x)=1$로 유한하므로 $\rho_t\in\mathcal{P}_2(\mathbb{R})$.</li></ol></div><div class='box'><p class='small'><strong>정의 2.</strong></p><div class='formula'>$$ \partial_t\rho_t=-\nabla\cdot(\rho_t b_\theta)+\frac12\nabla\cdot((gg^\top)\nabla\rho_t) $$</div><h3>해설</h3><ol class='list'><li>첫 항 $-\nabla\cdot(\rho b)$는 “속도장 $b$에 의해 질량이 이동한다”를 의미한다(연속방정식의 형태).</li><li>둘째 항은 확산에 의한 퍼짐을 나타낸다. $g=0$이면 이 항이 사라져 결정론적 수송 방정식으로 줄어든다.</li></ol><h3>직관(정의와 연결)</h3><ol class='list'><li>drift는 흐름(flow), diffusion은 퍼짐(spread)이다. 두 효과가 합쳐져 분포가 진화한다.</li></ol><h3>수치 예시</h3><ol class='list'><li>1차원에서 $b(x)=-x$, $g=0$이면 분포는 원점으로 수축하는 흐름을 따른다.</li><li>1차원에서 $b=0$, $g$ 상수면 분포는 열방정식처럼 점점 퍼진다.</li></ol></div><h2>직관(요약) (Intuition)</h2><ol class='list'><li>많은 샘플을 찍어 히스토그램을 그렸을 때, 그 히스토그램이 시간에 따라 어떻게 변하는지가 $\rho_t$다.</li><li>ODE(결정론)면 분포가 ‘쓸려 가듯’ 이동하고, SDE(확률)면 추가로 퍼지는(확산) 효과가 생긴다.</li><li>ComfyUI에서 “같은 설정으로 seed만 바꿔 여러 장을 뽑는다”는 것은 최종 분포 $\rho_{t_{\mathrm{end}}}$에서 i.i.d. 샘플을 여러 개 얻는 행위다. 한 장 생성만으로는 $\rho_t$를 볼 수 없고, 여러 seed에 대한 집단 통계가 필요하다.</li><li>코드 구현 관점에선 $\rho_t$를 직접 저장하지는 못하므로(고차원), 보통은 관측 함수 $f:\mathcal{X}\to\mathbb{R}$를 정해 $f(x_t)$의 히스토그램/평균을 본다(몬테카를로). 예: 픽셀 평균, 노름 $\|x\|_2$, 특정 채널 분산 등.</li></ol><h2>구체 원소 예시(모음) (Concrete Examples)</h2><ol class='list'><li>가장 쉬운 예로 $\mathcal{X}=\mathbb{R}$에서 $\rho_t=\mathcal{N}(0,\sigma(t)^2)$라고 하자. 예를 들어 $\sigma(t)=1-t$면 $t=0$에서 분산 1, $t=0.9$에서 분산 $0.1^2=0.01$이다.</li><li>샘플을 3개만 보자: $t=0$에서 $x$가 (예시로) $-0.2, 0.5, 1.1$처럼 나왔다면, $\rho_0$는 ‘이런 값들이 나올 수 있다’는 분포를 요약한다.</li><li>(관측량 예) $\mathcal{X}=\mathbb{R}^2$에서 $f(x)=\|x\|_2$라 하자. seed 3개로 $x^{(1)}=(0.3,0.4)$, $x^{(2)}=(1.0,0.0)$, $x^{(3)}=(-0.6,0.8)$를 얻으면 $f$ 값은 $(0.5,1.0,1.0)$이고, 평균은 $(0.5+1.0+1.0)/3\approx0.833$이다(분포를 관측량으로 요약).</li></ol><h2>코드 대응 (Code Mapping)</h2><ol class='list'><li>실험에서는 히스토그램/feature 통계로 $\rho_t$ 변화를 간접 추정한다.</li></ol><h2>자주 헷갈리는 점 (Pitfalls)</h2><ol class='list'><li>개별 trajectory 오차와 분포 오차(weak error)는 다른 개념이다.</li></ol><h2>관련 기호 (Related Symbols)</h2><div class='topnav'><a class="btn" href="V_t.html">$v_t$</a><a class="btn" href="b_theta.html">$b_\theta$</a><a class="btn" href="g_func.html">$g$</a></div><div class="topnav"><a class="btn" href="Fk.html">이전: $\mathcal{F}_k$</a><a class="btn" href="V_t.html">다음: $v_t$</a></div></article></div></body></html>